"use strict";(self.webpackChunknewschecker=self.webpackChunknewschecker||[]).push([[985],{7985:(R,x,s)=>{s.r(x),s.d(x,{RatingsModule:()=>M});var _=s(6895),t=s(1571),m=s(3599);class d{}d.\u0275fac=function(e){return new(e||d)},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-ratings"]],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"router-outlet")},dependencies:[m.lC]});var g=s(4006),i=s(529),c=s(162),Z=s(7259),f=s(3841),C=s(2292),v=s(6481);class l{constructor(){}ngOnInit(){}}function h(o,e){1&o&&(t.TgZ(0,"div"),t._uU(1," First Name is required! "),t.qZA())}function O(o,e){if(1&o&&(t.TgZ(0,"div",37),t.YNc(1,h,2,0,"div",38),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.f.rating.errors.rating)}}function T(o,e){1&o&&(t.TgZ(0,"div"),t._uU(1," Description is required! "),t.qZA())}function A(o,e){if(1&o&&(t.TgZ(0,"div",37),t.YNc(1,T,2,0,"div",38),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.f.description.errors.description)}}function U(o,e){if(1&o&&(t.TgZ(0,"div",39),t._UZ(1,"img",40),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("src",n.preview,t.LSH)}}function P(o,e){if(1&o&&(t.TgZ(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44)(4,"h2",45)(5,"button",46),t._uU(6),t.qZA()(),t.TgZ(7,"div",47)(8,"div",48),t._UZ(9,"app-rating-languages",49),t.qZA()()()()()()),2&o){const n=e.$implicit;t.xp6(5),t.uIk("data-bs-target","#accordionOne"+n.value),t.xp6(1),t.hij(" ",n.language," "),t.xp6(1),t.Q6J("id","accordionOne"+n.value),t.xp6(2),t.Q6J("language",n)}}function F(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"div",6)(1,"form",7),t.NdJ("ngSubmit",function(){const u=t.CHM(n).ngIf,p=t.oxw();return t.KtG(p.submitForm(u.data))}),t.TgZ(2,"div",8)(3,"div",9)(4,"label",10),t._uU(5,"Rating"),t.qZA(),t._UZ(6,"input",11),t.TgZ(7,"div",12),t.YNc(8,O,2,1,"div",13),t.qZA()(),t.TgZ(9,"div",9)(10,"label",10),t._uU(11,"Description"),t.qZA(),t._UZ(12,"textarea",14),t.TgZ(13,"div",12),t.YNc(14,A,2,1,"div",13),t.qZA()(),t.TgZ(15,"div",15)(16,"label",16),t._uU(17,"Image"),t.qZA(),t.TgZ(18,"div",17)(19,"div",18)(20,"label",19),t._UZ(21,"img",20),t.TgZ(22,"div",21)(23,"div",22)(24,"div",23),t._UZ(25,"i",24),t.qZA()()(),t.TgZ(26,"input",25),t.NdJ("change",function(r){t.CHM(n);const u=t.oxw();return t.KtG(u.uploadImageFile(r))}),t.qZA()()()(),t.TgZ(27,"div",26),t.YNc(28,U,2,1,"div",27),t.qZA()(),t.TgZ(29,"div",28)(30,"div",29)(31,"div",30)(32,"h6",31),t._uU(33,"Languages"),t.qZA()(),t.TgZ(34,"div"),t.YNc(35,P,10,4,"div",32),t.qZA()()(),t.TgZ(36,"div",33)(37,"button",34)(38,"span",35),t._uU(39),t.qZA(),t._UZ(40,"i",36),t.qZA()()()()()}if(2&o){const n=e.ngIf,a=t.oxw();t.xp6(1),t.Q6J("formGroup",a.ratingForm),t.xp6(7),t.Q6J("ngIf",a.f.rating.touched&&a.f.rating.errors),t.xp6(6),t.Q6J("ngIf",a.f.description.touched&&a.f.description.errors),t.xp6(14),t.Q6J("ngIf",a.preview&&null!==a.preview),t.xp6(7),t.Q6J("ngForOf",n.data),t.xp6(2),t.Q6J("disabled",a.ratingForm.invalid),t.xp6(2),t.Oqu(a.buttonText)}}l.\u0275fac=function(e){return new(e||l)},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-rating-languages"]],inputs:{language:"language"},decls:15,vars:3,consts:[["id","accountDetailsValidation",1,"content","active","dstepper-block","fv-plugins-bootstrap5","fv-plugins-framework"],[1,"mb-3","row","mt-20"],[1,"col-sm-3"],[1,"switch","switch-success"],["type","checkbox",1,"switch-input",3,"ngModel","checked","ngModelChange"],[1,"switch-toggle-slider"],[1,"switch-on"],[1,"ti","ti-check"],[1,"switch-off"],[1,"ti","ti-x"],[1,"switch-label"],[1,"col-sm-9"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12","d-flex","justify-content-between","mt-4"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3)(4,"input",4),t.NdJ("ngModelChange",function(r){return n.language.isEnabled=r}),t.qZA(),t.TgZ(5,"span",5)(6,"span",6),t._UZ(7,"i",7),t.qZA(),t.TgZ(8,"span",8),t._UZ(9,"i",9),t.qZA()(),t.TgZ(10,"span",10),t._uU(11,"Enable"),t.qZA()()(),t.TgZ(12,"div",11)(13,"input",12),t.NdJ("ngModelChange",function(r){return n.language.rating=r}),t.qZA()(),t._UZ(14,"div",13),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("ngModel",n.language.isEnabled)("checked",n.language.isEnabled),t.xp6(9),t.Q6J("ngModel",n.language.rating))},dependencies:[g.Fj,g.Wl,g.JJ,g.On],styles:["td[_ngcontent-%COMP%]{white-space:-o-pre-wrap;word-wrap:break-word;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap}.upload_icon[_ngcontent-%COMP%]{color:#226099!important;font-size:1.5rem!important}.border_right[_ngcontent-%COMP%]{border-right:1px solid lightgrey}.img-fluid[_ngcontent-%COMP%]{max-width:30%!important;height:auto}.padding_left[_ngcontent-%COMP%]{margin-left:10px}.padding_bottom[_ngcontent-%COMP%]{margin-bottom:10px}.padding_top[_ngcontent-%COMP%]{margin-top:10px}.box-border-left[_ngcontent-%COMP%], .box-border-right[_ngcontent-%COMP%]{border-right:6px solid lightgrey}.item-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:20px;height:auto;max-height:100px;width:auto;border-radius:5px;overflow:hidden}.image-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50%!important;width:auto!important;border-radius:0;margin:0 auto}.image-upload[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1em;color:#ccc}.image-upload[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer;opacity:0;height:50%;width:50%;z-index:10;position:absolute;top:0;left:0}.image-upload[_ngcontent-%COMP%]{margin-bottom:20px;position:relative}.mt-20[_ngcontent-%COMP%]{margin-top:20px}.item-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:43px;line-height:43px;border:1px solid #ddd;border-radius:4px;margin-bottom:20px}"]});class w{constructor(e,n,a,r,u,p,b,q){this.fb=e,this.userService=n,this.ratingService=a,this.languageService=r,this.sharedService=u,this._router=p,this.activatedRoute=b,this.toastService=q,this.percentDone=0,this.submitted=!1,this.buttonText="Add",this.headerText="Add",this.rating={},this.validation_messages={firstName:[{type:"required",message:"First Name is required"}],lastName:[{type:"required",message:"Last Name is required"}],email:[{type:"required",message:"Email is required"},{type:"pattern",message:"Enter a valid mail"}],mobile:[{type:"required",message:"Mobile password is required"}],role:[{type:"required",message:"Role is required"}]}}initForm(e){this.ratingForm=this.fb.group({rating:[e?.rating||"",g.kI.required],description:[e?.description||"",g.kI.required],image:[e?.image||"",[g.kI.required]]}),e?.image&&(this.preview=e.image)}ngOnInit(){const e=this.activatedRoute.snapshot.paramMap.get("id");null!=e&&(this.ratingService.getRating(e).subscribe(n=>{this.rating=n.data,this.initForm(this.rating)}),this.buttonText="Update",this.headerText="Edit"),this.initForm(this.rating),this.languages$=this.languageService.getAllLanguages()}uploadImageFile(e){console.log(e);const n=e.target.files[0];this.ratingForm.patchValue({image:n}),this.ratingForm.get("image").updateValueAndValidity();const a=new FileReader;a.onload=()=>{this.preview=a.result},a.readAsDataURL(n),this.uploadFile(n,"image")}submitForm(e){this.ratingService.addRating({rating:this.ratingForm.value.rating,description:this.ratingForm.value.description,image:this.rating.image,languages:e}).subscribe(a=>{console.log(a)},a=>{console.log("error",a),this.toastService.show(a,{classname:"bg-dander text-dark",delay:1e4})},()=>{this.toastService.show("New Rating Added",{classname:"bg-success text-dark",delay:1e4}),this._router.navigate(["/ratings/list"])})}uploadFile(e,n){var a=new FormData;a.append(n,e),this.sharedService.addVideoTemplate(a).subscribe(r=>{switch(r.type){case i.dt.Sent:console.log("Request has been made!");break;case i.dt.ResponseHeader:console.log("Response header has been received!");break;case i.dt.UploadProgress:this.percentDone=Math.round(r.loaded/r.total*100),console.log(`Uploaded! ${this.percentDone}%`);break;case i.dt.Response:console.log("User successfully created!",r.body),this.percentDone=!1,this.rating[n]=r.body.data[0].url,"image"==n&&(this.preview=this.rating[n])}})}get f(){return this.ratingForm.controls}}w.\u0275fac=function(e){return new(e||w)(t.Y36(g.qu),t.Y36(c.K),t.Y36(Z.k),t.Y36(f.T),t.Y36(C.F),t.Y36(m.F0),t.Y36(m.gz),t.Y36(v.k))},w.\u0275cmp=t.Xpm({type:w,selectors:[["app-create-rating"]],decls:9,vars:4,consts:[[1,"container-xxl","flex-grow-1","container-p-y"],[1,"fw-bold","py-3","mb-4"],[1,"text-muted","fw-light"],[1,"card"],[1,"card-body"],["id","accountDetailsValidation","class","content active dstepper-block fv-plugins-bootstrap5 fv-plugins-framework",4,"ngIf"],["id","accountDetailsValidation",1,"content","active","dstepper-block","fv-plugins-bootstrap5","fv-plugins-framework"],[1,"example-form",3,"formGroup","ngSubmit"],[1,"row","g-3"],[1,"col-sm-12","fv-plugins-icon-container"],["for","multiStepsUsername",1,"form-label"],["type","text","formControlName","rating","name","multiStepsUsername","id","multiStepsUsername","placeholder","Name",1,"form-control"],[1,"fv-plugins-message-container","invalid-feedback"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","description","name","multiStepsUsername","id","multiStepsUsername","placeholder","Description",1,"form-control"],[1,"mb-3","row","mt-20"],["for","html5-text-input",1,"mt-20","col-md-2","col-form-label"],[1,"col-md-2"],[1,"image-upload"],["for","file_upload",2,"cursor","pointer"],["src","","alt","",1,"uploaded-image"],[1,"h-100"],[1,"dplay-tbl"],[1,"dplay-tbl-cell"],[1,"ti","ti-upload","upload_icon"],["data-required","image","type","file","name","image_name","id","file_upload","accept","image/*","data-traget-resolution","image_resolution","value","",1,"image-input",3,"change"],[1,"col-md-8"],["class","preview","class","card","style","max-width:125px",4,"ngIf"],[1,"bs-stepper-content"],["id","account-details",1,"content","active","dstepper-block"],[1,"content-header","mb-3"],[1,"mb-0"],["class","mb-3 row",4,"ngFor","ngForOf"],[1,"col-12","d-flex","justify-content-between","mt-4"],[1,"btn","btn-primary","btn-next","waves-effect","waves-light",3,"disabled"],[1,"align-middle","d-sm-inline-block","d-none","me-sm-1","me-0"],[1,"ti","ti-device-floppy"],[1,"invalid-feedback"],[4,"ngIf"],[1,"card",2,"max-width","125px"],["alt","Card image cap",1,"card-img",3,"src"],[1,"mb-3","row"],[1,"col-sm-10"],["id","accordionExample",1,"accordion","mt-3"],[1,"card","accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","aria-expanded","true","aria-controls","accordionOne",1,"accordion-button"],["data-bs-parent","#accordionExample",1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body"],[3,"language"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h4",1)(2,"span",2),t._uU(3,"Settings/Ratings/"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",3)(6,"div",4),t.YNc(7,F,41,7,"div",5),t.ALo(8,"async"),t.qZA()()()),2&e&&(t.xp6(4),t.hij("",n.headerText," "),t.xp6(3),t.Q6J("ngIf",t.lcZ(8,2,n.languages$)))},dependencies:[_.sg,_.O5,g._Y,g.Fj,g.JJ,g.JL,g.sg,g.u,l,_.Ov],styles:[".image-upload[_ngcontent-%COMP%]{margin-bottom:20px;position:relative}.mt-20[_ngcontent-%COMP%]{margin-top:20px}td[_ngcontent-%COMP%]{white-space:-o-pre-wrap;word-wrap:break-word;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap}.upload_icon[_ngcontent-%COMP%]{color:#226099!important;font-size:1.5rem!important}.border_right[_ngcontent-%COMP%]{border-right:1px solid lightgrey}.img-fluid[_ngcontent-%COMP%]{max-width:30%!important;height:auto}.padding_left[_ngcontent-%COMP%]{margin-left:10px}.padding_bottom[_ngcontent-%COMP%]{margin-bottom:10px}.padding_top[_ngcontent-%COMP%]{margin-top:10px}.box-border-left[_ngcontent-%COMP%], .box-border-right[_ngcontent-%COMP%]{border-right:6px solid lightgrey}.item-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:20px;height:auto;max-height:100px;width:auto;border-radius:5px;overflow:hidden}.image-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50%!important;width:auto!important;border-radius:0;margin:0 auto}.image-upload[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1em;color:#ccc}.image-upload[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer;opacity:0;height:50%;width:50%;z-index:10;position:absolute;top:0;left:0}.item-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:43px;line-height:43px;border:1px solid #ddd;border-radius:4px;margin-bottom:20px}"]});var L=s(2340),D=s(5415);class y{constructor(e,n,a){this.http=e,this.router=n,this.route=a,this.title="newschecker",this.baseURL=L.N.BASE_URL,this.dtOptions={}}ngOnInit(){var e=this;this.dtOptions={ajax:(n,a)=>{e.http.get(`${this.baseURL}/ratings`).subscribe(r=>{a({recordsTotal:r.data.length,recordsFiltered:r.data.length,data:r.data})})},columns:[{data:""},{data:"_id"},{data:"_id"},{data:"rating"},{data:"description"},{data:"languages"},{data:"image"},{data:"status"},{data:""}],columnDefs:[{className:"control",orderable:!1,targets:0,render:function(n,a,r,u){return""}},{targets:1,visible:!1},{target:2,visible:!1},{targets:5,render:function(n,a,r,u){let p=`${r.languages.filter(b=>b.isEnabled).map(function(b){return b.language}).join(", ")}`;return console.log(p),"<span >"+p+"</span>"}},{targets:6,render:function(n,a,r,u){return`<div class="form-check custom-option custom-option-image custom-option-image-radio">\n      <label class="form-check-label custom-option-content" for="customRadioImg2">\n        <span class="custom-option-body">\n          <img src="${r.image}" height="200" alt="radioImg" style="\n          max-height: 100px;\n          max-width: 120px;\n      ">\n        </span>\n      </label>\n      <input name="customRadioImage" class="form-check-input" type="radio" value="customRadioImg2" id="customRadioImg2">\n    </div>`}},{targets:7,render:function(n,a,r,u){var p=parseInt(r.status),b={2:{title:"Current",class:"bg-label-primary"},1:{title:"Enabled",class:" bg-label-success"},3:{title:"Rejected",class:" bg-label-danger"},4:{title:"Resigned",class:" bg-label-warning"},0:{title:"Enabled",class:" bg-label-info"}};return typeof b[p]>"u"?n:'<span class="badge '+b[p].class+'">'+b[p].title+"</span>"}},{targets:-1,title:"Actions",orderable:!1,render:function(n,a,r,u){return`<div class="d-inline-block">\n          <a href="javascript:;" class="btn btn-sm btn-icon dropdown-toggle hide-arrow" data-bs-toggle="dropdown"><i class="text-primary ti ti-dots-vertical"></i></a>\n          <div class="dropdown-menu dropdown-menu-end m-0">\n          <a href="/ratings/${r._id}"    class="dropdown-item">Details</a>\n          <a href="javascript:;" class="dropdown-item">Archive</a>\n          <div class="dropdown-divider"></div>\n          <a href="javascript:;" class="dropdown-item text-danger delete-record">Delete</a>\n          </div> \n          </div>`}}],order:[[2,"desc"]],dom:"<'row'<'col-sm-6'l><'col-sm-4'f> <'col-sm-2 text-center table_add_button 'B>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",buttons:[{text:'<i class="ti ti-plus me-sm-1"></i> <span class="d-none d-sm-inline-block"></span>',className:"create-new btn btn-primary btn-sm ",action:function(n,a,r,u){e.router.navigate(["ratings/create"])}}],lengthMenu:[7,10,25,50,75,100]}}ngAfterViewInit(){}}y.\u0275fac=function(e){return new(e||y)(t.Y36(i.eN),t.Y36(m.F0),t.Y36(m.gz))},y.\u0275cmp=t.Xpm({type:y,selectors:[["app-rating-list"]],decls:27,vars:1,consts:[[1,"container-xxl","flex-grow-1","container-p-y"],[1,"fw-bold","py-3","mb-4"],[1,"text-muted","fw-light"],[1,"card"],[1,"card-body"],[1,"card-datatable","table-responsive"],["datatable","",1,"dt-fixedheader","table",3,"dtOptions"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h4",1)(2,"span",2),t._uU(3,"Settings/Ratings/"),t.qZA(),t._uU(4," List"),t.qZA(),t.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr"),t._UZ(11,"th")(12,"th"),t.TgZ(13,"th"),t._uU(14,"id"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Rating"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Description"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Language"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Icon"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Status"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Action"),t.qZA()()()()()()()()),2&e&&(t.xp6(8),t.Q6J("dtOptions",n.dtOptions))},dependencies:[D.G]});var S=s(5791);const I=[{path:"",component:d,children:[{redirectTo:"list",pathMatch:"full",path:""},{path:"list",component:y},{path:"create",component:w},{path:":id",component:w}]}];class M{}M.\u0275fac=function(e){return new(e||M)},M.\u0275mod=t.oAB({type:M}),M.\u0275inj=t.cJS({imports:[_.ez,S.m,m.Bz.forChild(I)]})},3841:(R,x,s)=>{s.d(x,{T:()=>d});var _=s(2340),t=s(1571),m=s(529);class d{constructor(i){this.http=i,this.baseURL=_.N.BASE_URL}getAllLanguages(){return this.http.get(`${this.baseURL}/language`)}addLanguage(i){return this.http.post(`${this.baseURL}/language`,i)}updateLanguage(i,c){return this.http.patch(`${this.baseURL}/language/${c}`,i)}getLanguage(i){return this.http.get(`${this.baseURL}/language/${i}`)}deleteLanguage(i){return this.http.delete(`${this.baseURL}/language/${i}`)}}d.\u0275fac=function(i){return new(i||d)(t.LFG(m.eN))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})},2292:(R,x,s)=>{s.d(x,{F:()=>d});var _=s(2340),t=s(1571),m=s(529);class d{constructor(i){this.http=i,this.baseURL=_.N.BASE_URL,this.MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"]}getFormattedDate(i,c=!1,Z=!1){const f=i.getDate(),C=this.MONTH_NAMES[i.getMonth()],v=i.getFullYear(),l=i.getHours();let h=i.getMinutes();return h<10&&(h=`0${h}`),c?`${c} at ${l}:${h}`:Z?`${f}. ${C} at ${l}:${h}`:`${f}. ${C} ${v}. at ${l}:${h}`}timeAgo(i){if(!i)return null;const c="object"==typeof i?i:new Date(i),f=new Date,C=new Date(f-864e5),v=Math.round((f-c)/1e3),l=Math.round(v/60),h=f.toDateString()===c.toDateString(),O=C.toDateString()===c.toDateString(),T=f.getFullYear()===c.getFullYear();return v<5?"now":v<60?`${v} seconds ago`:v<90?"about a minute ago":l<60?`${l} minutes ago`:h?this.getFormattedDate(c,"Today"):O?this.getFormattedDate(c,"Yesterday"):T?this.getFormattedDate(c,!1,!0):this.getFormattedDate(c)}addVideoTemplate(i){return this.http.post(`${this.baseURL}/file/upload`,i,{reportProgress:!0,observe:"events"})}}d.\u0275fac=function(i){return new(i||d)(t.LFG(m.eN))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}}]);